@using Microsoft.AspNetCore.Http.Extensions
@using DotNetUniverse.Services.EventData
@using DotNetUniverse.Models
@inject EventDataService EventDataService
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - .NET Universe</title>
    <meta name="description" content="@(ViewData["OgDescription"] ?? ".NET Universe - 닷넷 개발자를 위한 최대 규모의 컨퍼런스. .NET Dev(닷넷데브) 주최")" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="@(ViewData["OgType"] ?? "website")" />
    <meta property="og:title" content="@(ViewData["OgTitle"] ?? ViewData["Title"]) - .NET Universe" />
    <meta property="og:description" content="@(ViewData["OgDescription"] ?? ".NET Universe - 닷넷 개발자를 위한 최대 규모의 컨퍼런스")" />
    <meta property="og:url" content="@(ViewData["OgUrl"] ?? Context.Request.GetDisplayUrl())" />
    @if (ViewData["OgImage"] != null)
    {
        <meta property="og:image" content="@ViewData["OgImage"]" />
    }
    else
    {
        <meta property="og:image" content="/images/og-default.png" />
    }
    <meta property="og:site_name" content=".NET Universe" />
    <meta property="og:locale" content="ko_KR" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="@(ViewData["OgTitle"] ?? ViewData["Title"]) - .NET Universe" />
    <meta name="twitter:description" content="@(ViewData["OgDescription"] ?? ".NET Universe - 닷넷 개발자를 위한 최대 규모의 컨퍼런스")" />
    @if (ViewData["OgImage"] != null)
    {
        <meta name="twitter:image" content="@ViewData["OgImage"]" />
    }
    
    <script type="importmap"></script>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/DotNetUniverse.styles.css" asp-append-version="true" />
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-purple fixed-top">
            <div class="container">
                <a class="navbar-brand fw-bold" asp-area="" asp-page="/Index">
                    <i class="bi bi-stars me-2"></i>.NET Universe
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse" id="navbarMain">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-page="/About">소개</a>
                        </li>
                        @{
                            var registrationEvents = EventDataService.AllEvents
                                .Where(e => e.Event.Status == EventStatus.Registration || e.Event.Status == EventStatus.CallForParticipation)
                                .ToList();
                        }
                        @foreach (var eventData in registrationEvents)
                        {
                            <li class="nav-item">
                                <a class="nav-link fw-bold text-white" href="@eventData.Url">@eventData.Event.Title</a>
                            </li>
                        }
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-page="/Archive">지난 행사</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-page="/Sponsorship">후원 안내</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-page="/StudyList">스터디</a>
                        </li>
                    </ul>
                    <form class="d-flex" method="get" asp-page="/Search">
                        <div class="input-group">
                            <input class="form-control form-control-sm" type="search" name="Query" 
                                   placeholder="검색..." aria-label="검색" />
                            <button class="btn btn-outline-light btn-sm" type="submit">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </nav>
    </header>

    <main role="main">
        @RenderBody()
    </main>

    <footer class="footer-dark py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="text-white mb-3">
                        <i class="bi bi-stars me-2"></i>.NET Universe
                    </h5>
                    <p class="text-white-50">
                        .NET Dev(닷넷데브)가 주최하는<br />
                        대한민국 최대 규모의 .NET 개발자 컨퍼런스
                    </p>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h6 class="text-white mb-3">바로가기</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/Index">홈</a></li>
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/Archive">지난 행사</a></li>
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/Sponsorship">후원 안내</a></li>
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/About">소개</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h6 class="text-white mb-3">법적 고지</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/Privacy">개인정보처리방침</a></li>
                        <li class="mb-2"><a class="text-white-50 text-decoration-none" asp-page="/CodeOfConduct">행동 강령</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-4">
                    <h6 class="text-white mb-3">소셜 미디어</h6>
                    <div class="social-links">
                        <a href="https://github.com/dotnetdev-kr" target="_blank" rel="noopener noreferrer" class="text-white-50 me-3 fs-4"><i class="bi bi-github"></i></a>
                        <a href="https://www.youtube.com/channel/UCIoGwsb2m9p9GjXdLOTbsNg" target="_blank" rel="noopener noreferrer" class="text-white-50 me-3 fs-4"><i class="bi bi-youtube"></i></a>
                        <a href="https://www.facebook.com/groups/dotnetdev.kr" target="_blank" rel="noopener noreferrer" class="text-white-50 fs-4"><i class="bi bi-facebook"></i></a>
                    </div>
                </div>
            </div>
            <hr class="my-4 border-secondary" />
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start">
                    <p class="text-white-50 mb-0">&copy; @DateTime.Now.Year .NET Dev(닷넷데브). All rights reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <p class="text-white-50 mb-0">Built with <i class="bi bi-heart-fill text-danger"></i> and ASP.NET Core</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)

    <script src="https://loopback.social/banner.js" defer></script>
</body>
</html>
